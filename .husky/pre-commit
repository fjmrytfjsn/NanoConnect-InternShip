#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# pre-commitフック
# コミット前にLintとフォーマットをチェック

echo "🔍 Pre-commit チェックを実行中..."

# バックエンドのチェック
echo "📦 Backend のチェック..."
cd backend

# TypeScript型チェック
echo "🔧 TypeScript型チェック..."
npm run type-check

# ESLint
echo "🔍 ESLint チェック..."
npm run lint

# Prettierフォーマットチェック
echo "✨ Prettierフォーマットチェック..."
npm run format:check

echo "✅ Backend チェック完了"
cd ..

if [ -d "frontend" ]; then
  echo "🎨 Frontend のチェック..."
  cd frontend
  npm run type-check
  npm run lint
  npm run format:check
  echo "✅ Frontend チェック完了"
  cd ..
fi

echo "🎉 Pre-commit チェックが完了しました！"
